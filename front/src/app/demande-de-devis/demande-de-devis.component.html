<p-card >
  <ng-template pTemplate="header">
    <h6 class="pg-10">Demander un devis</h6>
  </ng-template>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" >
    <div class=" font-12">
      Les champs avec une astérisque <span class="color-nature font-16"><b>*</b></span> sont obligatoires.
    </div>

    <div class="p-grid p-fluid mg-t-10">

      <div class="p-col-12">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon"> <div class="wh-80">Nom<span class="color-nature font-16"><b>*</b></span></div> </span>
          <input type="text" formControlName="nomCtl" pInputText placeholder="">
        </div>
      </div>
      <div *ngIf="validatorsSvc.shouldShowRequiredError(form.get('nomCtl'))" class="color-nature">Le nom est obligatoire.</div>
      <div *ngIf="validatorsSvc.shouldShowMinLengthError(form.get('nomCtl'))" class="color-nature">{{validatorsSvc.displayMinLengthError(form.get('nomCtl'),'nom')}}</div>
      <div *ngIf="validatorsSvc.shouldShowMaxLengthError(form.get('nomCtl'))" class="color-nature">{{validatorsSvc.displayMaxLengthError(form.get('nomCtl'),'nom')}}</div>

      <div class="p-col-12 mg-t-10">
        <div class="p-inputgroup ">
              <span class="p-inputgroup-addon">   <div class="wh-80">Prénom<span class="color-nature font-16"><b>*</b></span></div></span>
          <input type="text" formControlName="prenomCtl" pInputText placeholder="">
        </div>
      </div>
      <div *ngIf="validatorsSvc.shouldShowRequiredError(form.get('prenomCtl'))" class="color-nature">Le prénom est obligatoire.</div>
      <div *ngIf="validatorsSvc.shouldShowMinLengthError(form.get('prenomCtl'))" class="color-nature">{{validatorsSvc.displayMinLengthError(form.get('prenomCtl'),'prénom')}}</div>
      <div *ngIf="validatorsSvc.shouldShowMaxLengthError(form.get('prenomCtl'))" class="color-nature">{{validatorsSvc.displayMaxLengthError(form.get('prenomCtl'),'prénom')}}</div>

      <div class="p-col-12 mg-t-10">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon"> <div class="wh-80">Société</div></span>
          <input type="text" formControlName="societeCtl" pInputText placeholder="">
        </div>
      </div>


      <div class="p-col-12 mg-t-10">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon"> <div class="wh-80">Adresse</div></span>
          <input type="text" formControlName="adresseCtl" pInputText placeholder="">
        </div>
      </div>

      <div class="p-col-12 mg-t-10">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon"> <div class="wh-80">Ville</div></span>
          <p-autoComplete field="nom" formControlName="villeCtl"
                          [suggestions]="villes" (completeMethod)="search($event)">

            <ng-template let-item pTemplate="item">
              <div class="d-flex">
                <div class="mr-auto">
                  {{item.nom}}
                </div>
                <div>
                  {{item.codePostal}}
                </div>
              </div>
            </ng-template>
          </p-autoComplete>
          <span class="mg-l-10 lh-40" *ngIf="form.get('villeCtl').value">{{form.get('villeCtl').value.codePostal}}</span>
        </div>
      </div>

      <div class="p-col-12 mg-t-10">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon"> <div class="wh-80">Téléphone</div></span>
          <input class="max-wh-400"  formControlName="telephoneCtl" type="tel" pInputText placeholder="">
        </div>
      </div>

      <div class="p-col-12 mg-t-10">
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon"> <div class="wh-80">Email <span class="color-nature font-16"><b>*</b></span></div></span>
          <input class="max-wh-400" formControlName="emailCtl" type="email"  pInputText placeholder="">
        </div>
      </div>
      <div *ngIf="validatorsSvc.shouldShowRequiredError(form.get('emailCtl'))" class="color-nature">L'email est obligatoire.</div>
      <div *ngIf="validatorsSvc.shouldShowMinLengthError(form.get('emailCtl'))" class="color-nature">{{validatorsSvc.displayMinLengthError(form.get('emailCtl'),'email')}}</div>
      <div *ngIf="validatorsSvc.shouldShowMaxLengthError(form.get('emailCtl'))" class="color-nature">{{validatorsSvc.displayMaxLengthError(form.get('emailCtl'),'email')}}</div>
      <div *ngIf="validatorsSvc.shouldShowEmailPatternError(form.get('emailCtl'))" class="color-nature">{{validatorsSvc.displayEmailPatternError(form.get('emailCtl'))}}</div>

      <div class="p-col-12 mg-t-10">
        <div class="p-inputgroup">
              <span class="p-inputgroup-addon "><div class="wh-80"> Rédiger un message <span class="color-nature font-16"><b>*</b></span></div></span>
          <textarea pInputTextarea formControlName="messageCtl"[rows]="6" [cols]="30"
                    placeholder=""></textarea>
        </div>
      </div>
      <div *ngIf="validatorsSvc.shouldShowRequiredError(form.get('messageCtl'))" class="color-nature">Le message est obligatoire.</div>
      <div *ngIf="validatorsSvc.shouldShowMinLengthError(form.get('messageCtl'))" class="color-nature">{{validatorsSvc.displayMinLengthError(form.get('messageCtl'),'message')}}</div>
      <div *ngIf="validatorsSvc.shouldShowMaxLengthError(form.get('messageCtl'))" class="color-nature">{{validatorsSvc.displayMaxLengthError(form.get('messageCtl'),'message')}}</div>

      <div class="d-flex mg-t-10">
        <div class="mr-auto ">
        </div>
        <div>
          <button pButton pRipple type="submit" label="Envoyer"  class="p-button-rounded"></button>
        </div>
      </div>

    </div>
  </form>

</p-card>
