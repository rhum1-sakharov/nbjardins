<ng-container *ngIf="devis && devis.id">

  <div class="p-grid devis-preview pg-8 mg-t-10 mg-l-1">
    <div class="p-col-6 " (click)="openDialogBlockArtisan()">

      <div class="editable-block">
        <div class="p-d-flex">
          <div class="not-editable mg-r-5">SIRET</div>
          <app-block-edit-field
            [width]="223"
            placeholder="siret..."
            [inputValue]="devis.artisanSiret"
            [type]="tf.TEXT">
          </app-block-edit-field>
        </div>

        <div>
          <app-block-edit-field
            [width]="275"
            placeholder="société..."
            [inputValue]="devis.artisanSociete"
            [type]="tf.TEXT">
          </app-block-edit-field>
        </div>

        <div>
        <app-block-edit-field
          [width]="275"
          placeholder="adresse..."
          [inputValue]="devis.artisanAdresse"
          [type]="tf.TEXT">
        </app-block-edit-field>
        </div>

        <div class="p-d-flex">
        <span class="mg-r-5">
             <app-block-edit-field
               [width]="100"
               placeholder="code postal..."
               [inputValue]="devis.artisanCodePostal"
               [type]="tf.TEXT">
        </app-block-edit-field>
        </span>
          <span>
            <app-block-edit-field
              [width]="170"
              placeholder="ville..."
              [inputValue]="devis.artisanVille"
              [type]="tf.TEXT">
        </app-block-edit-field>

        </span>
        </div>
        <div class="p-d-flex">
          <span class="not-editable mg-r-23 ">Tél</span>
          <span>
            <app-block-edit-field
              [width]="225"
              placeholder="téléphone..."
              [inputValue]="devis.artisanTelephone"
              [type]="tf.TEXT">
        </app-block-edit-field>
        </span>
        </div>
        <div class="p-d-flex">
          <span class="not-editable mg-r-4">Email</span>
          <span>
            <app-block-edit-field
              [width]="225"
              placeholder="email..."
              [inputValue]="devis.artisanEmail"
              [type]="tf.TEXT">
              ></app-block-edit-field>
        </span>
        </div>

      </div>

    </div>
    <div class="p-col-6" (click)="openDialogBlockClient()">
      <div class="editable-block mg-l-5">
        <div class="p-d-flex">

        <span class="mg-r-5">
          <app-block-edit-field
            [width]="120"
            placeholder="prénom client..."
            [inputValue]="devis.clientPrenom"
            [type]="tf.TEXT">
          </app-block-edit-field>
        </span>

          <app-block-edit-field
            [width]="145"
            placeholder="nom client..."
            [inputValue]="devis.clientNom"
            [type]="tf.TEXT">
          </app-block-edit-field>

        </div>
        <div>
          <app-block-edit-field
            [width]="270"
            placeholder="adresse client..."
            [inputValue]="devis.clientAdresse"
            [type]="tf.TEXT">
          </app-block-edit-field>
        </div>
        <div class="p-d-flex">
        <span class="mg-r-5">
          <app-block-edit-field
            [width]="120"
            placeholder="code postal..."
            [inputValue]="devis.clientCodePostal"
            [type]="tf.TEXT">
        </app-block-edit-field>

        </span>
          <span>
           <app-block-edit-field
             [width]="145"
             placeholder="ville client..."
             [inputValue]="devis.clientVille"
             [type]="tf.TEXT">
        </app-block-edit-field>

        </span>
        </div>
        <div class="p-d-flex">

          <span class="not-editable mg-r-4">Email</span>
          <app-block-edit-field
            [width]="221"
            placeholder="email client..."
            [inputValue]="devis.clientEmail"
            [type]="tf.TEXT">
          </app-block-edit-field>
        </div>
      </div>
    </div>

    <div class="p-col-6">
      <strong class="not-editable">Devis n° {{devis.numeroDevis}}</strong>
    </div>
    <div class="p-col-6">
      <app-edit-text-field [inputValue]="devis.sujet"
                           placeholder="sujet..."
                           (emit)="updateDevis('sujet',$event)" [width]="280"></app-edit-text-field>
    </div>

    <div class="p-col-6">
      <div class="p-d-flex">

        <span class="mg-r-5">
          <app-edit-text-field [inputValue]="devis.lieu"
                               placeholder="lieu..."
                               (emit)="updateDevis('lieu',$event)" [width]="165"></app-edit-text-field>
        </span>
        <span>
          <app-edit-date-field [inputValue]="devis.dateDevis"
                               placeholder="date..."
                               (emit)="updateDevis('dateDevis',$event)" [width]="110"></app-edit-date-field>
        </span>
      </div>

    </div>
    <div class="p-col-6">
    </div>

    <div class="p-col-12">
      <app-articles [devis]="devis" [devisOptionList]="devisOptionList"></app-articles>
    </div>


    <div class="p-d-flex">
          <span class="mg-r-5 not-editable">
            <strong>Conditions de réglement</strong>
          </span>
      <span>
          <app-edit-text-field [inputValue]="devis.conditionDeReglement"
                               placeholder="condition de réglement..."
                               (emit)="updateDevis('conditionDeReglement',$event)" [width]="410"></app-edit-text-field>
      </span>
    </div>

    <div class="p-d-flex">
      <strong class="mg-r-19 not-editable">Règlement à l'ordre de</strong>
      <span>
             <app-edit-text-field [inputValue]="devis.ordre"
                                  placeholder="à l'ordre de..."
                                  (emit)="updateDevis('ordre',$event)"
                                  [width]="410"></app-edit-text-field>
          </span>
    </div>


    <div class="p-d-flex">
          <span class="mg-r-5 not-editable">
            <strong>Devis valable</strong>
          </span>
      <span>

         <app-edit-integer-field [inputValue]="devis.validiteDevisMois"
                                 placeholder="validité..."
                                 (emit)="updateDevis('validiteDevisMois',$event)"
                                 [width]="30"></app-edit-integer-field>
      </span>
      <span class="mg-l-5 not-editable">
        <strong>mois.</strong>
      </span>
    </div>

    <div class="p-d-flex" data-test="provision" *ngIf="doUtils.getDevisOption(devisOptionList,mo.PROVISION)">
    <span class="mg-r-5 not-editable">
    Acceptation du devis accompagné d'une provision de
    </span>
      <span class="mg-r-5">
       <app-edit-decimal-field [inputValue]="devis.provision"
                               placeholder="provision en %..."
                               (emit)="updateDevis('provision',$event)"
                               [width]="60"></app-edit-decimal-field>
    </span>
      <span class="mg-r-5 not-editable">
        %
      </span>
    </div>

    <div class="p-col-12 ">
          <span class="not-editable mg-r-5">
            Bon pour commande,
          </span>
    </div>

    <div class="p-col-12">
          <span class="not-editable mg-r-5">
            Le ...........................................
          </span>
    </div>

    <div class="p-col-6">
          <span class="not-editable mg-r-5">
           Signature et nom du signataire
          </span>
    </div>
    <div class="p-col-6">
          <span class="not-editable mg-r-5">
           TODO signature artisan
          </span>
    </div>

  </div>

  <pre>
    {{devisOptionList | json}}
  </pre>

</ng-container>

<!--DIALOG ARTISAN-->
<app-block-artisan></app-block-artisan>

<!--DIALOG CLIENT-->
<app-block-client></app-block-client>
